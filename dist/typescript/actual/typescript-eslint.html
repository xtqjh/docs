<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>typescript &amp; eslint | TypeScript开发教程</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/images/typescript.png">
    <meta name="description" content="目录">
    <link rel="preload" href="/assets/css/0.styles.4d367315.css" as="style"><link rel="preload" href="/assets/js/app.6c22f85a.js" as="script"><link rel="preload" href="/assets/js/2.0bf99b28.js" as="script"><link rel="preload" href="/assets/js/7.1c095bbf.js" as="script"><link rel="prefetch" href="/assets/js/10.47898d89.js"><link rel="prefetch" href="/assets/js/11.3f8f8cde.js"><link rel="prefetch" href="/assets/js/12.d9b0d17c.js"><link rel="prefetch" href="/assets/js/13.3dda2bde.js"><link rel="prefetch" href="/assets/js/14.765727fa.js"><link rel="prefetch" href="/assets/js/15.f1588bcf.js"><link rel="prefetch" href="/assets/js/16.10654720.js"><link rel="prefetch" href="/assets/js/17.8abf1b93.js"><link rel="prefetch" href="/assets/js/18.17b96721.js"><link rel="prefetch" href="/assets/js/19.489dca49.js"><link rel="prefetch" href="/assets/js/20.2b5b268e.js"><link rel="prefetch" href="/assets/js/21.e42c3dfa.js"><link rel="prefetch" href="/assets/js/22.6b63ea11.js"><link rel="prefetch" href="/assets/js/23.7c3cb747.js"><link rel="prefetch" href="/assets/js/24.146ca6ec.js"><link rel="prefetch" href="/assets/js/25.62c0760a.js"><link rel="prefetch" href="/assets/js/26.c299a724.js"><link rel="prefetch" href="/assets/js/27.1b1eae99.js"><link rel="prefetch" href="/assets/js/28.db242675.js"><link rel="prefetch" href="/assets/js/29.f45a6444.js"><link rel="prefetch" href="/assets/js/3.4f4c47e2.js"><link rel="prefetch" href="/assets/js/30.2f7cc9df.js"><link rel="prefetch" href="/assets/js/31.b0acbdab.js"><link rel="prefetch" href="/assets/js/32.10c8f1db.js"><link rel="prefetch" href="/assets/js/4.18b29c2e.js"><link rel="prefetch" href="/assets/js/5.f202cfef.js"><link rel="prefetch" href="/assets/js/6.ba1b60cd.js"><link rel="prefetch" href="/assets/js/8.3e38f882.js"><link rel="prefetch" href="/assets/js/9.8d51d340.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d367315.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript开发教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/dengwb1991/typescript-development-tutorial" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/dengwb1991/typescript-development-tutorial" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>初识篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduce/what-is-typescript.html" class="sidebar-link">什么是 TypeScript</a></li><li><a href="/introduce/install-typescript.html" class="sidebar-link">安装 TypeScript</a></li><li><a href="/introduce/hello-typescript.html" class="sidebar-link">Hello TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basics/basis-data-types.html" class="sidebar-link">基础类型</a></li><li><a href="/basics/interface.html" class="sidebar-link">接口</a></li><li><a href="/basics/function.html" class="sidebar-link">函数</a></li><li><a href="/basics/class.html" class="sidebar-link">类</a></li><li><a href="/basics/class-and-interface.html" class="sidebar-link">类与接口</a></li><li><a href="/basics/generics.html" class="sidebar-link">泛型</a></li><li><a href="/basics/type-check-mechanism.html" class="sidebar-link">类型检查机制</a></li><li><a href="/basics/advanced-type.html" class="sidebar-link">高级类型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/import-export.html" class="sidebar-link">导入导出</a></li><li><a href="/project/namespace.html" class="sidebar-link">命名空间</a></li><li><a href="/project/declaration-merging.html" class="sidebar-link">声明合并</a></li><li><a href="/project/identify-the-class-library.html" class="sidebar-link">识别库的类型</a></li><li><a href="/project/declaration-syntax.html" class="sidebar-link">声明语法</a></li><li><a href="/project/declaration-files.html" class="sidebar-link">声明文件</a></li><li><a href="/project/compile-tools.html" class="sidebar-link">编译工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>配置篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/configuration/file-options.html" class="sidebar-link">文件选项</a></li><li><a href="/configuration/compiler-options.html" class="sidebar-link">编译选项</a></li><li><a href="/configuration/vscode-compiler.html" class="sidebar-link">解决 vscode 异常提示问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>实战篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/actual/typescript-react.html" class="sidebar-link">typescript &amp; react 手动搭建</a></li><li><a href="/actual/react-component-type.html" class="sidebar-link">React 组件与类型</a></li><li><a href="/actual/typescript-vue.html" class="sidebar-link">typescript &amp; vue 手动搭建</a></li><li><a href="/actual/vue-component-type.html" class="sidebar-link">Vue 组件与类型</a></li><li><a href="/actual/typescript-eslint.html" aria-current="page" class="active sidebar-link">typescript &amp; eslint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/actual/typescript-eslint.html#用-eslint-来规范-typescript-代码" class="sidebar-link">用 ESLint 来规范 Typescript 代码</a></li><li class="sidebar-sub-header"><a href="/actual/typescript-eslint.html#用-eslint-来规范-react-代码" class="sidebar-link">用 ESLint 来规范 React 代码</a></li><li class="sidebar-sub-header"><a href="/actual/typescript-eslint.html#在-webpack-中配置-eslint" class="sidebar-link">在 Webpack 中配置 ESLint</a></li></ul></li><li><a href="/actual/typescript-jest.html" class="sidebar-link">typescript &amp; jest</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript-eslint"><a href="#typescript-eslint" class="header-anchor">#</a> typescript &amp; eslint</h1> <p>对于 Typescript 项目的编码规范而言，主要有两种选择 ESLint 和 TSLint。ESLint 不仅能规范 JS代码，通过配置解析器，也能规范 TS代码。此外由于性能问题，TypeScript  官方决定全面采用 ESLint，甚至把仓库作为测试平台，而  ESLint 的 TypeScript 解析器也成为独立项目，专注解决双方兼容性问题。</p> <p><strong>本文主要介绍以下内容</strong></p> <blockquote><ol><li>用 ESLint 来规范 Typescript 代码</li> <li>用 ESLint 来规范 React 代码</li> <li>在 Webpack 中配置 ESLint</li></ol></blockquote> <p>大部分内容来源于 <a href="https://github.com/forthealllight/blog/issues/45" target="_blank" rel="noopener noreferrer">在Typescript项目中，如何优雅的使用ESLint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="用-eslint-来规范-typescript-代码"><a href="#用-eslint-来规范-typescript-代码" class="header-anchor">#</a> 用 ESLint 来规范 Typescript 代码</h2> <p><strong>第一步：安装相关依赖包</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>eslint: ESLint核心代码</li> <li>@typescript-eslint/parser：ESLint 的解析器，用于解析 TypesSript，从而检查和规范 TypeScript 代码</li> <li>@typescript-eslint/eslint-plugin：这是一个 ESLint 插件，包含了各类定义好的检测 TypeScript 代码的规范</li></ul></div> <p><strong>第二步：修改 .eslintrc.js 文件</strong></p> <p>在项目根目录下创建 <code>eslint</code> 配置文件，这里介绍 <code>.eslintrc.js</code> 文件配置。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parser<span class="token operator">:</span>  <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span> <span class="token comment">// 定义 ESLint 的解析器</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 定义文件继承的子规范</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@typescript-eslint'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 定义所依赖的插件</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 指定代码的运行环境</span>
    browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>                               
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>在 TS项目中必须执行解析器为 <code>@typescript-eslint/parser</code>，才能正确的检测和规范 TS代码</li> <li>env 环境变量配置，如 <code>console</code> 属性只有在 browser 环境下才会存在，如果没有设置支持 browser，那么可能报 console is undefined 的错误。</li></ul></div> <h2 id="用-eslint-来规范-react-代码"><a href="#用-eslint-来规范-react-代码" class="header-anchor">#</a> 用 ESLint 来规范 React 代码</h2> <p>如果你的项目为 React + TypeScript 的，可以按照以下步骤来配置 <code>eslint</code>。</p> <p><strong>第一步：安装相关依赖包</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> -D eslint-plugin-react
</code></pre></div><p><strong>第二步：修改 .eslintrc.js 文件</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parser<span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 使用推荐的 React 代码检测规范</span>
    <span class="token string">'plugin:react/recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/recommended'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@typescript-eslint'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>                         
    browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  settings<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动发现 React 版本，从而进行规范 React代码</span>
    react<span class="token operator">:</span> <span class="token punctuation">{</span>
      pragma<span class="token operator">:</span> <span class="token string">'React'</span><span class="token punctuation">,</span>
      version<span class="token operator">:</span> <span class="token string">'detect'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 指定 ESLint 可以解析 JSX语法</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">2019</span><span class="token punctuation">,</span>
    sourceType<span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
    ecmaFeatures<span class="token operator">:</span> <span class="token punctuation">{</span>
      jsx<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'semi'</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">'eol-last'</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>                           
<span class="token punctuation">}</span>
</code></pre></div><h2 id="在-webpack-中配置-eslint"><a href="#在-webpack-中配置-eslint" class="header-anchor">#</a> 在 Webpack 中配置 ESLint</h2> <p>通常前端开发项目时，会使用 webpack 来构建。在开发过程中我们想要实时监控到书写的代码是否符合 ESLint 配置的规范时。我们就需要进行一些相关配置。</p> <p>示例为 React + TypeScript，webpack@4.39.3、eslint@6.7.2</p> <p><strong>第一步：安装相关依赖包</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> -D eslint eslint-config-standard eslint-friendly-formatter eslint-loader eslint-plugin-import eslint-plugin-node eslint-plugin-promise eslint-plugin-standard
</code></pre></div><p><strong>第二步：修改 webpack 配置</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>

rules<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex">/\.(ts|tsx)$/</span><span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">'ts-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        formatter<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint-friendly-formatter'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 消息提示格式化</span>
        emitWarning<span class="token operator">:</span> <span class="token operator">!</span>config<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>showEslintErrorsInOverlay <span class="token comment">// false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// resolve is root path</span>
    exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>第三步：修改 .eslintrc.js 文件</strong></p> <ul><li>注意：下面的配置示例并不兼容 TypeScript，可以结合上面 <strong>用 ESLint 来规范 React 代码</strong> 中 ESLint配置进行整理后再使用。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认情况下，ESLint 会在所有父级组件中寻找配置文件，一直到根目录。ESLint一旦发现配置文件中有 &quot;root&quot;: true，它就会停止在父级目录中寻找.</span>
  parser<span class="token operator">:</span> <span class="token string">'babel-eslint'</span><span class="token punctuation">,</span> <span class="token comment">// 对Babel解析器的包装使其与 ESLint 兼容.</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    sourceType<span class="token operator">:</span> <span class="token string">'module'</span> <span class="token comment">// 代码是 ECMAScript 模块</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 预定义的全局变量</span>
    browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器环境</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// node 环境</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'standard'</span> <span class="token comment">// 扩展一个流行的风格指南，即 eslint-config-standard </span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'standard'</span> <span class="token comment">// standard 风格依赖包</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>若使用 <code>dev-server</code> 可以将 <code>quiet</code> 属性设置为 false. 可在终端提示相关错误信息。同时也可以安装并使用 <code>friendly-errors-webpack-plugin</code> 插件进一步优化。</p> <p>更多相关配置请查询<a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin/docs/rules" target="_blank" rel="noopener noreferrer">typescript-eslint rules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/6/2020, 8:20:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/actual/vue-component-type.html" class="prev">
        Vue 组件与类型
      </a></span> <span class="next"><a href="/actual/typescript-jest.html">
        typescript &amp; jest
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6c22f85a.js" defer></script><script src="/assets/js/2.0bf99b28.js" defer></script><script src="/assets/js/7.1c095bbf.js" defer></script>
  </body>
</html>
