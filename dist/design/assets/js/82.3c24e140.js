(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{427:function(n,e,t){"use strict";t.r(e);var s=t(42),a=Object(s.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"撤销功能的实现-备忘录模式-三"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#撤销功能的实现-备忘录模式-三"}},[n._v("#")]),n._v(" 撤销功能的实现——备忘录模式（三）")]),n._v(" "),t("p",[n._v("21.3 完整解决方案")]),n._v(" "),t("p",[n._v("为了实现撤销功能，Sunny公司开发人员决定使用备忘录模式来设计中国象棋软件，其基本结构如图21-4所示：")]),n._v(" "),t("p",[t("img",{attrs:{src:"http://my.csdn.net/uploads/201205/02/1335892140_9528.jpg",alt:""}})]),n._v(" "),t("p",[n._v("在图21-4中，Chessman充当原发器，ChessmanMemento充当备忘录，MementoCaretaker充当负责人，在MementoCaretaker中定义了一个ChessmanMemento类型的对象，用于存储备忘录。完整代码如下所示：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('//象棋棋子类：原发器  \nclass Chessman {  \n    private String label;  \n    private int x;  \n    private int y;  \n  \n    public Chessman(String label,int x,int y) {  \n        this.label = label;  \n        this.x = x;  \n        this.y = y;  \n    }  \n  \n    public void setLabel(String label) {  \n        this.label = label;   \n    }  \n  \n    public void setX(int x) {  \n        this.x = x;   \n    }  \n  \n    public void setY(int y) {  \n        this.y = y;   \n    }  \n  \n    public String getLabel() {  \n        return (this.label);   \n    }  \n  \n    public int getX() {  \n        return (this.x);   \n    }  \n  \n    public int getY() {  \n        return (this.y);   \n    }  \n      \n    //保存状态  \n    public ChessmanMemento save() {  \n        return new ChessmanMemento(this.label,this.x,this.y);  \n    }  \n      \n    //恢复状态  \n    public void restore(ChessmanMemento memento) {  \n        this.label = memento.getLabel();  \n        this.x = memento.getX();  \n        this.y = memento.getY();  \n    }  \n}  \n  \n//象棋棋子备忘录类：备忘录  \nclass ChessmanMemento {  \n    private String label;  \n    private int x;  \n    private int y;  \n  \n    public ChessmanMemento(String label,int x,int y) {  \n        this.label = label;  \n        this.x = x;  \n        this.y = y;  \n    }  \n  \n    public void setLabel(String label) {  \n        this.label = label;   \n    }  \n  \n    public void setX(int x) {  \n        this.x = x;   \n    }  \n  \n    public void setY(int y) {  \n        this.y = y;   \n    }  \n  \n    public String getLabel() {  \n        return (this.label);   \n    }  \n  \n    public int getX() {  \n        return (this.x);   \n    }  \n  \n    public int getY() {  \n        return (this.y);   \n    }     \n}  \n  \n//象棋棋子备忘录管理类：负责人  \nclass MementoCaretaker {  \n    private ChessmanMemento memento;  \n  \n    public ChessmanMemento getMemento() {  \n        return memento;  \n    }  \n  \n    public void setMemento(ChessmanMemento memento) {  \n        this.memento = memento;  \n    }  \n}  \n      编写如下客户端测试代码：\n[java] view plain copy\nclass Client {  \n    public static void main(String args[]) {  \n        MementoCaretaker mc = new MementoCaretaker();  \n        Chessman chess = new Chessman("车",1,1);  \n        display(chess);  \n        mc.setMemento(chess.save()); //保存状态       \n        chess.setY(4);  \n        display(chess);  \n        mc.setMemento(chess.save()); //保存状态  \n        display(chess);  \n        chess.setX(5);  \n        display(chess);  \n        System.out.println("******悔棋******");     \n        chess.restore(mc.getMemento()); //恢复状态  \n        display(chess);  \n    }  \n      \n    public static void display(Chessman chess) {  \n        System.out.println("棋子" + chess.getLabel() + "当前位置为：" + "第" + chess.getX() + "行" + "第" + chess.getY() + "列。");  \n    }  \n}  \n')])])]),t("p",[n._v("编译并运行程序，输出结果如下：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("棋子车当前位置为：第1行第1列。\n棋子车当前位置为：第1行第4列。\n棋子车当前位置为：第1行第4列。\n棋子车当前位置为：第5行第4列。\n******悔棋******\n棋子车当前位置为：第1行第4列。\n")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);