(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{468:function(v,_,t){"use strict";t.r(_);var s=t(42),e=Object(s.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"自定义语言的实现-解释器模式-六"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义语言的实现-解释器模式-六"}},[v._v("#")]),v._v(" 自定义语言的实现——解释器模式（六）")]),v._v(" "),t("p",[v._v("18.6 解释器模式总结")]),v._v(" "),t("p",[v._v("解释器模式为自定义语言的设计和实现提供了一种解决方案，它用于定义一组文法规则并通过这组文法规则来解释语言中的句子。虽然解释器模式的使用频率不是特别高，但是它在正则表达式、XML文档解释等领域还是得到了广泛使用。与解释器模式类似，目前还诞生了很多基于抽象语法树的源代码处理工具，例如Eclipse中的Eclipse AST，它可以用于表示Java语言的语法结构，用户可以通过扩展其功能，创建自己的文法规则。")]),v._v(" "),t("ol",[t("li",[v._v("主要优点")])]),v._v(" "),t("p",[v._v("解释器模式的主要优点如下：")]),v._v(" "),t("p",[v._v("(1) 易于改变和扩展文法。由于在解释器模式中使用类来表示语言的文法规则，因此可以通过继承等机制来改变或扩展文法。")]),v._v(" "),t("p",[v._v("(2) 每一条文法规则都可以表示为一个类，因此可以方便地实现一个简单的语言。")]),v._v(" "),t("p",[v._v("(3) 实现文法较为容易。在抽象语法树中每一个表达式节点类的实现方式都是相似的，这些类的代码编写都不会特别复杂，还可以通过一些工具自动生成节点类代码。")]),v._v(" "),t("p",[v._v("(4) 增加新的解释表达式较为方便。如果用户需要增加新的解释表达式只需要对应增加一个新的终结符表达式或非终结符表达式类，原有表达式类代码无须修改，符合“开闭原则”。")]),v._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[v._v("主要缺点")])]),v._v(" "),t("p",[v._v("解释器模式的主要缺点如下：")]),v._v(" "),t("p",[v._v("(1) 对于复杂文法难以维护。在解释器模式中，每一条规则至少需要定义一个类，因此如果一个语言包含太多文法规则，类的个数将会急剧增加，导致系统难以管理和维护，此时可以考虑使用语法分析程序等方式来取代解释器模式。")]),v._v(" "),t("p",[v._v("(2) 执行效率较低。由于在解释器模式中使用了大量的循环和递归调用，因此在解释较为复杂的句子时其速度很慢，而且代码的调试过程也比较麻烦。")]),v._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[v._v("适用场景")])]),v._v(" "),t("p",[v._v("在以下情况下可以考虑使用解释器模式：")]),v._v(" "),t("p",[v._v("(1) 可以将一个需要解释执行的语言中的句子表示为一个抽象语法树。")]),v._v(" "),t("p",[v._v("(2) 一些重复出现的问题可以用一种简单的语言来进行表达。")]),v._v(" "),t("p",[v._v("(3) 一个语言的文法较为简单。")]),v._v(" "),t("p",[v._v("(4) 执行效率不是关键问题。【注：高效的解释器通常不是通过直接解释抽象语法树来实现的，而是需要将它们转换成其他形式，使用解释器模式的执行效率并不高。】")]),v._v(" "),t("p",[v._v("练习")]),v._v(" "),t("blockquote",[t("p",[v._v("Sunny软件公司欲为数据库备份和同步开发一套简单的数据库同步指令，通过指令可以对数据库中的数据和结构进行备份，例如，输入指令“COPY VIEW FROM srcDB TO desDB”表示将数据库srcDB中的所有视图(View)对象都拷贝至数据库desDB；输入指令“MOVE TABLE Student FROM srcDB TO desDB”表示将数据库srcDB中的Student表移动至数据库desDB。试使用解释器模式来设计并实现该数据库同步指令。")])]),v._v(" "),t("p",[v._v("【注：本练习是2010年我在给某公司进行设计模式内训时该公司正在开发的一个小工具！】")]),v._v(" "),t("p",[v._v("解释器模式可以说是所有设计模式中难度较大、使用频率较低的一个模式，如果您能够静下心来把这几篇文章都看完，我相信您对解释器模式应该有了一个较为全面的了解，欢迎大家与我交流和讨论。")]),v._v(" "),t("p",[v._v("感谢您能够坚持看完这六篇关于解释器模式的文章！")])])}),[],!1,null,null,null);_.default=e.exports}}]);